{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "NCERT Educational Chunk Schema",
  "description": "Schema for curriculum-aware semantic chunks optimized for educational QA",
  "type": "object",
  "required": ["content", "metadata"],
  "properties": {
    "content": {
      "type": "string",
      "description": "The actual text content of the chunk",
      "minLength": 1
    },
    "metadata": {
      "type": "object",
      "required": [
        "class_number",
        "subject",
        "chapter_number",
        "chapter_title",
        "language",
        "chunk_type",
        "chunk_id",
        "token_count"
      ],
      "properties": {
        "class_number": {
          "type": "integer",
          "minimum": 1,
          "maximum": 12,
          "description": "NCERT class number (1-12)"
        },
        "subject": {
          "type": "string",
          "description": "Subject name",
          "enum": [
            "mathematics",
            "science",
            "social_science",
            "english",
            "hindi",
            "sanskrit",
            "history",
            "geography",
            "civics",
            "economics",
            "physics",
            "chemistry",
            "biology",
            "accountancy",
            "business_studies",
            "computer_science"
          ]
        },
        "chapter_number": {
          "type": "integer",
          "minimum": 0,
          "description": "Chapter number within subject"
        },
        "chapter_title": {
          "type": "string",
          "description": "Full chapter title"
        },
        "section_number": {
          "type": ["string", "null"],
          "description": "Section number if applicable (e.g., '5.3')"
        },
        "source_file": {
          "type": "string",
          "description": "Original source file path"
        },
        "page_numbers": {
          "type": "array",
          "items": {
            "type": "integer",
            "minimum": 1
          },
          "description": "List of page numbers covered by this chunk"
        },
        "language": {
          "type": "string",
          "description": "Language code",
          "enum": ["eng", "hin", "san", "urd", "eng+hin"]
        },
        "chunk_type": {
          "type": "string",
          "description": "Educational chunk type for retrieval optimization",
          "enum": [
            "definition",
            "theorem",
            "proof",
            "formula",
            "explanation",
            "example",
            "note",
            "exercise",
            "question",
            "solution",
            "summary",
            "activity",
            "context",
            "mixed"
          ]
        },
        "chunk_id": {
          "type": "string",
          "description": "Unique identifier for chunk (format: class_subject_chapter_num)",
          "pattern": "^\\d+_[a-z_]+_\\d+_\\d+$"
        },
        "token_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Approximate token count for LLM context"
        },
        "char_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Character count"
        },
        "has_equations": {
          "type": "boolean",
          "description": "Whether chunk contains mathematical equations"
        },
        "has_examples": {
          "type": "boolean",
          "description": "Whether chunk contains worked examples"
        },
        "has_exercises": {
          "type": "boolean",
          "description": "Whether chunk contains practice problems"
        },
        "prerequisite_concepts": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of prerequisite concepts (optional, for future use)"
        },
        "structure_confidence": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "description": "Confidence score for structure detection (0.0-1.0)"
        },
        "completeness": {
          "type": "string",
          "enum": ["complete", "partial", "fragment"],
          "description": "Indicates if chunk is complete logical unit, partial, or fragment"
        }
      }
    }
  }
}
