{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "NCERT Textbook Extracted Page Schema",
  "description": "JSON schema for NCERT textbook pages extracted through OCR pipeline",
  "type": "object",
  "required": ["document_metadata", "pages"],
  "properties": {
    "document_metadata": {
      "type": "object",
      "description": "Document-level metadata",
      "required": ["total_pages", "source", "class", "subject", "language"],
      "properties": {
        "total_pages": {
          "type": "integer",
          "minimum": 1,
          "description": "Total number of pages in document"
        },
        "source": {
          "type": "string",
          "description": "Path to source PDF or image file"
        },
        "class": {
          "type": "integer",
          "minimum": 1,
          "maximum": 12,
          "description": "NCERT class number (1-12)"
        },
        "subject": {
          "type": "string",
          "description": "Subject name (e.g., mathematics, science)",
          "enum": [
            "mathematics", "science", "social_science", "english",
            "hindi", "sanskrit", "history", "geography", "civics",
            "economics", "physics", "chemistry", "biology",
            "accountancy", "business_studies", "computer_science"
          ]
        },
        "language": {
          "type": "string",
          "description": "OCR language code",
          "enum": ["eng", "hin", "san", "urd", "eng+hin"]
        }
      }
    },
    "pages": {
      "type": "array",
      "description": "Array of extracted pages",
      "items": {
        "type": "object",
        "required": ["text", "metadata"],
        "properties": {
          "text": {
            "type": "string",
            "description": "OCR-extracted text content from page"
          },
          "metadata": {
            "type": "object",
            "description": "Page-level metadata",
            "required": [
              "class_number", "subject", "chapter_number", "chapter_title",
              "page_number", "language", "content_type", "source_file",
              "ocr_confidence", "processing_timestamp"
            ],
            "properties": {
              "class_number": {
                "type": "integer",
                "minimum": 1,
                "maximum": 12
              },
              "subject": {
                "type": "string"
              },
              "chapter_number": {
                "type": "integer",
                "minimum": 0,
                "description": "Chapter number (0 if unknown)"
              },
              "chapter_title": {
                "type": "string",
                "description": "Chapter title (Unknown if not detected)"
              },
              "page_number": {
                "type": "integer",
                "minimum": 1,
                "description": "Physical page number in document"
              },
              "language": {
                "type": "string",
                "description": "Language code used for OCR"
              },
              "content_type": {
                "type": "string",
                "enum": ["text", "equation", "table", "diagram", "exercise", "mixed"],
                "description": "Type of content on page"
              },
              "source_file": {
                "type": "string",
                "description": "Source file path"
              },
              "ocr_confidence": {
                "type": "number",
                "minimum": 0,
                "maximum": 100,
                "description": "Average OCR confidence score (0-100)"
              },
              "processing_timestamp": {
                "type": "string",
                "format": "date-time",
                "description": "ISO 8601 timestamp of processing"
              }
            }
          },
          "bounding_boxes": {
            "type": ["array", "null"],
            "description": "Bounding boxes for text elements (for traceability)",
            "items": {
              "type": "object",
              "properties": {
                "text": {
                  "type": "string"
                },
                "confidence": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 100
                },
                "bbox": {
                  "type": "object",
                  "properties": {
                    "x": {"type": "integer"},
                    "y": {"type": "integer"},
                    "width": {"type": "integer"},
                    "height": {"type": "integer"}
                  }
                }
              }
            }
          },
          "preprocessing_applied": {
            "type": "array",
            "description": "List of preprocessing operations applied",
            "items": {
              "type": "string"
            }
          },
          "ocr_errors": {
            "type": ["array", "null"],
            "description": "List of errors encountered during OCR",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "processing_statistics": {
      "type": "object",
      "description": "Pipeline processing statistics",
      "properties": {
        "total_pages": {"type": "integer"},
        "successful_pages": {"type": "integer"},
        "failed_pages": {"type": "integer"},
        "low_confidence_pages": {"type": "integer"},
        "total_errors": {"type": "integer"}
      }
    }
  }
}
